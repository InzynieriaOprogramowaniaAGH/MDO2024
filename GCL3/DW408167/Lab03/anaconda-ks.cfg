# Generated by Anaconda 38.23.4
# Generated by pykickstart v3.47
#version=F38
# Use graphical install
graphical

# Keyboard layouts
keyboard --vckeymap=pl2 --xlayouts='pl','us'
# System language
lang en_US.UTF-8

%packages
@^server-product-environment
@container-management
@domain-client
@guest-agents
@server-hardware-support

url --mirrorlist=https://mirrors.fedoraproject.org/mirrorlist?repo=fedora-38&arch=aarch64
repo --name=updates --mirrorlist=http://mirrors.fedoraproject.org/mirrorlist?repo=updates-released-f38&arch=aarch64

%end

# Run the Setup Agent on first boot
firstboot --enable

# Generated using Blivet version 3.7.1
ignoredisk --only-use=vda
autopart
# Partition clearing information
clearpart --all --initlabel

# System timezone
timezone Europe/Warsaw --utc

# Root password
rootpw --iscrypted --allow-ssh $y$j9T$uxvtS4oj.kar3ZPfOV6PlbXa$JGhEpVJBBjfJOc.pKZ2sEnJew6XjPXqL4YC6JcgbKGA
user --groups=wheel --name=dawid --password=$y$j9T$eJwhhLuncMVaTW929Gj8yN9l$dNLpsEonIrWjZNJFlzlmGqhKKnKJECyLyVWyreIx.bD --iscrypted --gecos="dawid"


%post --log=/root/ks-post.log

# Install Ansible and Docker
dnf install -y ansible docker docker-compose

# Start the Docker service
systemctl start docker

# Enable Docker to start on boot
systemctl enable docker

# Run lighttpd
docker run -d -p 80:80 --name lighttpd-container jitesoft/lighttpd
# End of the %post section
%end